---
Title: "time travelling with Unix"
Description: "time travelling with Unix"
Tags: ["history","simulator","unix"]
Date: "2011-05-01"
Categories:
  - "blog"
Slug: "timetravellingwithunix"
---
<div><img class="aligncenter" title="SRI International " src="http://www.urigeller.com/wp-content/uploads/2015/01/uri_stanford_400_01.jpg" alt="" width="500" height="323" /></div><div><p>I discovered Unix back in 1998. At the time i was a lowly Windows desktop support engineer when i started dabbling with Red Hat Linux v 4.2. Compared to the process of fixing Windows 3.1 systems ( i.e. reinstall drivers and reboot - if that doesn&rsquo;t work, reinstall OS and drivers - repeat until it does work), playing with Linux was a joy of knowledge. Every part of the installation process was a problem hiding a wormhole of required knowledge. Eventually, we managed to start X - very literally, all we had was a grey screen with an &lsquo;X&rsquo; to represent the mouse pointer. However, it was addictive - every time you had to fix something, there was a reason for it, and you learned from that experience, and once fixed, it would stay fixed.</p><p>So, fast forward 13 years, and I find myself in a wiki loop, reading up on Bell Labs, then early iterations of Unix, and especially Version 7 Unix - <a href="http://en.wikipedia.org/wiki/Version_7_Unix">http://en.wikipedia.org/wiki/Version_7_Unix</a> - Back in 1998, i had my head full learning Linux and the newly released SunOS 5.7, so even though i was surrounded by older Vax, SGI, and Digital, I didn&rsquo;t explore much historical software at the time even though i did have a bit of a fixation with the PDP-11.</p></div>

<div><p>What caught my eye on the wiki page was this line - &ldquo;Bootable images for V7 can still be <a href="http://ftp.fibranet.cat/UnixArchive/PDP-11/Boot_Images/">downloaded</a> today, and can be run on modern hosts using PDP-11 emulators such as <a href="http://en.wikipedia.org/wiki/SIMH">SIMH</a>.&rdquo;.</p><p>whut??</p><p>Yeah! So, this is my step-by-step instructions for compiling SIMH on OS X (Snow Leopard 10.6.7), running the PDP-11 emulator and getting a V7 Unix image up and running on it. There are other HOWTOs out there and the documentation with SIMH does explain all this, but even so, I found it took me several hours of reading and searching to get things working, so I figure theres still room on the internets for what hopefully is a bit more of a concise howto..</p><p>You can find the SIMH homepage at:<br /><a href="http://simh.trailing-edge.com/">http://simh.trailing-edge.com/</a></p><p>The SIMH project consists of emulators for a bunch of historical machines, load of DEC machines from the VAX, through to the PDP range, plus IBMs, Honeywell, and even the Altair 8080.</p></div><div>&ldquo;<em>The Computer History Simulation Project is a loose Internet-based collective of people interested in restoring historically significant computer hardware and software systems by simulation. The goal of the project is to create highly portable system simulators and to publish them as freeware on the Internet, with freely available copies of significant or representative software.</em>&rdquo;</div><div><p>(You can also find a precompiled OS X binary at <a href="http://homepage.mac.com/mba/simh/index.html">http://homepage.mac.com/mba/simh/index.html</a> however compiling wasn&rsquo;t hard, and its all part of the fun, right?!)</p><p>First, if you don't already have it, you'll need to install Libpcap for network support, which you can get from <a href="http://www.tcpdump.org/">http://www.tcpdump.org/</a> - Install libpcap with the usual ./configure, make, make install dance, then download the simh source.</p><p>To install on OS X you need to export the OSTYPE environment variable.<br />(Or you'll get:<br />ld: library not found for -lrt<br />collect2: ld returned 1 exit status<br />make: *** [BIN/pdp1] Error 1)</p></div><div><strong>echo $OSTYPE</strong></div><div><strong> </strong><br /><strong>export OSTYPE</strong><br /><strong>make USE_NETWORK=1</strong></div><div><p>I encountered my first failure here, no BIN directory. Easily fixed with:</p><p><strong>mkdir BIN</strong><br /><strong>make USE_NETWORK=1</strong></p></div><div>boom!</div><div><strong>cd BIN</strong><br /><strong>./pdp11</strong>&nbsp;</p><p>After compiling, you can fire up any of the emulators and you&rsquo;ll find yourself in a <strong>sim&gt;</strong> shell.</p><p>&ldquo;Now what the hell do i do?&rdquo; was my first thought.</p><p>It took me a bit of reading to understand how to use the simulators, basically they are composed of the devices such as the CPU, disk, memory etc, plus Registers for which you set values. They are quite fully explained in - <a href="http://simh.trailing-edge.com/pdf/simh_doc.pdf">http://simh.trailing-edge.com/pdf/simh_doc.pdf</a> -</p><p>In order to load up any of the software, you have to set some device options, map your software image to a device then load it up. You&rsquo;ll find the software at:</p><p><a href="http://simh.trailing-edge.com/software.html">http://simh.trailing-edge.com/software.html</a></p><p>(and for more thorough explanation, read the doc at <a href="http://simh.trailing-edge.com/pdf/simh_swre.pdf">http://simh.trailing-edge.com/pdf/simh_swre.pdf</a>)</p><p>The correct V7 Unix to run on the PDP-11 is :<br /><a href="http://simh.trailing-edge.com/kits/uv7swre.zip"> http://simh.trailing-edge.com/kits/uv7swre.zip</a></p><p>The instructions given in the documentation are:</p><p><strong>sim&gt; set cpu u18 </strong><br /><strong> sim&gt; set rl0 RL02 </strong><br /><strong> sim&gt; att rl0 unix_v7_rl.dsk </strong><br /><strong> sim&gt; boot rl0 </strong><br /><strong>@boot </strong><br /><strong> New Boot, known devices are hp ht rk rl rp tm vt </strong><br /><strong> : rl(0,0)rl2unix </strong><br /><strong>#</strong></p><p>They are absolutely correct, however, a gotcha for me was that after i typed &ldquo;<strong>boot rl0</strong>&rdquo; I only got an &ldquo;<strong>@</strong>&rdquo; sign, and nothing more. I thought perhaps i had a corrupt image or something was different with my emulator. But no, i was just being a numpty, you actually need to type &ldquo;<strong>boot</strong>&rdquo; and press return, then type in the &#8220;<strong>rl(0,0)rl2unix </strong>&#8221; line too.</p><p>I also had to create a <strong>/tmp</strong> directory so i could view man pages, but yeah, apart from that, you should be good to go!</p><p>I also had fun playing with 2.11 BSD which i got from :<br /><a title="2.11" href="http://ftp.fibranet.cat/UnixArchive/PDP-11/Boot_Images/2.11_on_Simh/"> http://ftp.fibranet.cat/UnixArchive/PDP-11/Boot_Images/2.11_on_Simh/</a></p><p>This is a really well put together package, with a clear README file on how to use it.</p><p>download, unzip and run as:</p><p><strong>./pdp11 211bsd.simh</strong></p><p>You can even telnet into your virtual host:</p><p>rar!</p></div>
